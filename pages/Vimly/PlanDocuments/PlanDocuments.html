<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Plan Documents</title>
        <link rel="stylesheet" type="text/css" href="/js/Datatables/datatables.min.css" />        
        <link rel="stylesheet" type="text/css" href="../../css/site.css" />
        <link rel="stylesheet" href="../../css/bootstrap/bootstrap.css" />
        <link rel="stylesheet" href="./PlanDocuments.css" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    </head>
    <body style="margin: 10px">
        <select id="vimlyEnv">
            <option value="local">local</option>
            <option value="proj05">proj05</option>
            <option value="staging">staging</option>
            <option value="prod">prod</option>
        </select>

        <div class="container">
            <div class="row">
                <div class="col-6">
                    <fieldset>
                        <legend>Plans</legend>
                        <table id="planIds">
                            <thead>
                                <tr>
                                    <tr><th>PlanId</th></tr>
                                </tr>                    
                            </thead>
                            <tbody> 
                                <tr></tr>                   
                            </tbody>
                        </table>
                    </fieldset>
                </div>
                <div class="col-6">
                    <fieldset>
                        <legend>Documents</legend>
                        <table id="documentNames">
                            <thead>
                                <tr><th>Document</th></tr>                   
                            </thead>
                            <tbody> 
                                <tr></tr>                   
                            </tbody>
                        </table>
                    </fieldset>
                </div>
            </div>
            <div class="row">
                <div class="col-6">
                    <fieldset class="plan-details">
                        <legend>Links</legend>
                        <label class="plan-details-label" for="planId">Plan Id</label><input type="text" id="planId" placeholder="planId" value="49316MN1070001" />
                        <label class="plan-details-label" for="planYear">Plan Year</label><input type="text" id="planYear" placeholder="year" value="2020" />
                        <label class="plan-details-label" for="planMonth">Plan Month</label><input type="text" id="planMonth" placeholder="month" value="01" />
                        <input type="button" value="search" id="planLinksSearchButton" />
                        <table id="planLinks">
                            <thead>
                                <tr>
                                    <tr><th>Plan Id</th><th>Id (link id)</th><th>Title</th><th>Link</th><th>Type</th><th>SubType</th></tr>
                                </tr>                    
                            </thead>
                            <tbody> 
                                <tr></tr>                   
                            </tbody>
                        </table>
                    </fieldset>
                </div>
            </div>
            <div class="row">
                <div class="col-6">
                    <fieldset class="plan-details">
                        <legend>Mappings</legend>
                        <table id="planDocumentMappings">
                            <thead>
                                <tr>
                                    <tr><th>Pdf Name</th><th>Plan Id</th><th>Effective Date</th></tr>
                                </tr>                    
                            </thead>
                            <tbody> 
                                <tr></tr>                   
                            </tbody>
                        </table>
                    </fieldset>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <fieldset>
                        <legend>Script Editor</legend>

                        <textarea id="adHocScript">
_.each(planDocs.prop("planIds"), pid => {
    planDocs.printMessage(pid, true);
});
                        </textarea>
                    </fieldset>

                    <button id="adHocScriptRunButton">Run</button>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <button id="fixStuffButton">Fix stuff!</button>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <input id="sbcLinkPutTemplate" type="text" value="{{quotingPath}}/files/3d9c7c71-4860-496e-8880-bbbe0f830b4d/sbc-link?planId={{planId}}&effectiveDate={{effectiveYear}}-{{effectiveMonth}}-01&linkTitle={{fileName}}&storageLocation=s3://quoting.prod.prod.simon365.com/sbc/{{effectiveYear}}-{{effectiveMonth}}-01/{{planId}}/{{fileName}}" />
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <fieldset>
                        <legend>Messages:</legend>

                        <textarea id="messages">

                        </textarea>
                    </fieldset>
                </div>
            </div>
        </div>

        <script 
            src="https://code.jquery.com/jquery-3.4.1.js"
            integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
            crossorigin="anonymous">
        </script>        
        <script src="/dust.js"></script>  
        <script src="/lodash.full.js"></script>
        <script src="/dist/Vimly/main.bundle.js"></script>

        <script src="/serviceproxy/proxies.js"></script>
        <script src="/Datatables/datatables.min.js"></script>
        <script>
            // moved code into PlanDocuments.js
        </script>
    </body>
</html>